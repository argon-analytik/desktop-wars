(()=>{var t=globalThis.React;if(!t)throw new Error("React wurde nicht gefunden. Stelle sicher, dass `react.production.min.js` vor `build/app.js` geladen wird.");var{useCallback:wt,useEffect:ot,useMemo:Bt,useRef:gt,useState:x}=t;var Ot=globalThis.ReactDOM;if(!Ot)throw new Error("ReactDOM wurde nicht gefunden. Stelle sicher, dass `react-dom.production.min.js` vor `build/app.js` geladen wird.");var mt={width:976,height:734,screen:{x:87,y:90,width:640,height:480}};var g={cursor:"assets/sprites/fighter-a.png",crtMonitor:"assets/svg/crt-monitor.svg",wallpaper:"assets/sprites/wallpaper.png",systemFolder:"assets/sprites/system-folder.png",folderWall:"assets/sprites/folder-wall.png",trash:"assets/sprites/trash.png",clutter:"assets/sprites/clutter.png",enemyRegiMite:"assets/sprites/enemy-regi-mite.png",enemyPopupGremlin:"assets/sprites/enemy-popup-gremlin.png",enemySpyDot:"assets/sprites/enemy-spy-dot.png",pickupApple:"assets/sprites/pickup-apple.png",pickupCoolant:"assets/sprites/pickup-coolant.png",powerupRapid:"assets/sprites/powerup-rapid.png",powerupTriple:"assets/sprites/powerup-triple.png",powerupGiant:"assets/sprites/powerup-giant.png",deployableWatchdog:"assets/sprites/deployable-watchdog.png",deployableSticky:"assets/sprites/deployable-sticky.png"};function et({onClick:i,children:s,disabled:e=!1,variant:r="default"}){return t.createElement("button",{onClick:i,disabled:e,style:{padding:"6px 16px",fontSize:8,fontFamily:'"Press Start 2P", monospace',background:r==="primary"?"linear-gradient(180deg, #5a5 0%, #494 100%)":"linear-gradient(180deg, #eee 0%, #ccc 100%)",border:"2px solid",borderColor:r==="primary"?"#373 #252 #252 #373":"#aaa #777 #777 #aaa",borderRadius:4,cursor:e?"not-allowed":"pointer",color:r==="primary"?"#fff":"#333",opacity:e?.5:1}},s)}function it({title:i,width:s=300,children:e,x:r,y:u}){return t.createElement("div",{style:{position:r!==void 0?"absolute":"relative",left:r,top:u,width:s,background:"#f4f4f4",color:"#111",border:"2px solid #444",borderRadius:6,boxShadow:"6px 6px 0 rgba(0,0,0,0.25)",overflow:"hidden"}},t.createElement("div",{style:{height:18,background:"linear-gradient(180deg, #f0f0f0 0%, #d2d2d2 100%)",display:"flex",alignItems:"center",padding:"0 6px",gap:6}},t.createElement("div",{style:{width:10,height:10,background:"#e55",border:"1px solid #b33",borderRadius:2}}),t.createElement("span",{style:{fontSize:8,color:"#111",fontWeight:"bold"}},i)),t.createElement("div",{style:{padding:10}},e))}var se=new Map;function b({src:i,alt:s="",width:e,height:r=e,style:u,pixelated:d=!0,fallback:p=null,...h}){let[T,S]=x(()=>i?se.get(i)!==!1:!1);return!i||!T?p:t.createElement("img",{src:i,alt:s,width:e,height:r,draggable:!1,onError:()=>{se.set(i,!1),S(!1)},style:{imageRendering:d?"pixelated":void 0,...u},...h})}var Nt=new Map;function ae({extra:i,gaps:s}){if(!Number.isFinite(i)||i<=0||s<=0)return{margin:0,spacing:0};let e=Math.min(32,Math.floor(i/s));for(let r=0;r<=e;r+=1){let u=i-s*r;if(u<0)break;if(u%2===0)return{margin:u/2,spacing:r}}return{margin:0,spacing:0}}function _({src:i,width:s,height:e=s,frameWidth:r,frameHeight:u=r,columns:d,rows:p,frameIndex:h=0,marginX:T=0,marginY:S=0,spacingX:z=0,spacingY:N=0,pixelated:K=!0,style:C,fallback:m=null,alt:$=""}){let[F,U]=x(()=>i?Nt.get(i)!==!1:!1),[G,q]=x(null);ot(()=>{if(!i)return;if(Nt.get(i)===!1){U(!1);return}let rt=!1,V=new Image;return V.onload=()=>{rt||(Nt.set(i,!0),q({width:V.naturalWidth,height:V.naturalHeight}),U(!0))},V.onerror=()=>{rt||(Nt.set(i,!1),U(!1))},V.src=i,()=>{rt=!0}},[i]);let O=Math.max(1,d!=null?d:1),st=Math.max(1,p!=null?p:1),L=Math.max(1,r!=null?r:1),at=Math.max(1,u!=null?u:1),R=O*L,lt=st*at,bt=Bt(()=>{if(T!==0||z!==0||!G)return null;let rt=O-1,V=G.width-R,nt=ae({extra:V,gaps:rt});return R+rt*nt.spacing+nt.margin*2!==G.width?null:nt},[G,O,R,T,z]),ht=Bt(()=>{if(S!==0||N!==0||!G)return null;let rt=st-1,V=G.height-lt,nt=ae({extra:V,gaps:rt});return lt+rt*nt.spacing+nt.margin*2!==G.height?null:nt},[G,st,lt,S,N]),St=bt?bt.margin:T,ct=bt?bt.spacing:z,ut=ht?ht.margin:S,yt=ht?ht.spacing:N,kt=Bt(()=>G||{width:R+(O-1)*ct+St*2,height:lt+(st-1)*yt+ut*2},[G,O,st,R,lt,ct,yt,St,ut]),dt=Math.max(0,Math.floor(h)),ee=dt%O,Mt=Math.floor(dt/O)%st,Ft=s/L,Et=e/at,Dt=St+ee*(L+ct),vt=ut+Mt*(at+yt);return!i||!F?m:t.createElement("div",{"aria-label":$,style:{position:"relative",width:s,height:e,overflow:"hidden",...C}},t.createElement("img",{src:i,alt:"",draggable:!1,style:{position:"absolute",left:-Dt*Ft,top:-vt*Et,width:kt.width*Ft,height:kt.height*Et,imageRendering:K?"pixelated":void 0,userSelect:"none",pointerEvents:"none"}}))}function _t({x:i,y:s}){return t.createElement("div",{style:{position:"absolute",left:i-14,top:s-14,width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,opacity:.85,pointerEvents:"none",animation:"wobble 2s infinite"}},t.createElement(b,{src:g.clutter,width:18,height:18,style:{width:18,height:18},fallback:"\u{1F4C4}"}))}function Ct({type:i,x:s,y:e,aimDir:r=7}){let u=i==="watchdog"?g.deployableWatchdog:i==="sticky"?g.deployableSticky:null,d=i==="watchdog"?64:24,p=i==="watchdog"?64:22,h="drop-shadow(0 2px 4px rgba(0,0,0,0.4))",T=Number.isFinite(r)?Math.max(0,Math.min(7,Math.floor(r))):0;return t.createElement("div",{style:{position:"absolute",left:s+12-d/2,top:e+12-d/2,width:d,height:d,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,pointerEvents:"none"}},i==="watchdog"&&t.createElement("div",{style:{width:p,height:p,filter:h}},t.createElement(_,{src:u,width:p,height:p,frameWidth:44,frameHeight:44,columns:4,rows:2,marginX:10,marginY:10,spacingX:20,spacingY:20,frameIndex:T,fallback:t.createElement(b,{src:u,width:p,height:p,style:{width:p,height:p},fallback:t.createElement("span",{style:{filter:h}},"\u{1F415}")})})),i==="sticky"&&t.createElement(b,{src:u,width:p,height:p,style:{width:p,height:p,filter:h},fallback:t.createElement("span",{style:{filter:h}},"\u{1F4DD}")}))}function qt({x:i,y:s}){let[e,r]=x(0);ot(()=>{let h=setInterval(()=>r(T=>T+1),30);return()=>clearInterval(h)},[]);let u=Math.min(1,e/15),d=u*200,p=1-u;return u>=1?null:t.createElement("div",{style:{position:"absolute",left:i-d,top:s-d,width:d*2,height:d*2,pointerEvents:"none",zIndex:200}},t.createElement("svg",{width:d*2,height:d*2},t.createElement("circle",{cx:d,cy:d,r:d*.9,fill:"none",stroke:`rgba(74, 144, 255, ${p})`,strokeWidth:6}),t.createElement("circle",{cx:d,cy:d,r:d*.5,fill:"none",stroke:`rgba(100, 200, 255, ${p*.7})`,strokeWidth:3}),t.createElement("circle",{cx:d,cy:d,r:20*(1-u),fill:`rgba(255, 255, 255, ${p})`})))}function $t({type:i,x:s,y:e,size:r,stunned:u,isHit:d,frame:p,flipX:h=!1}){let T=i==="regi-mite"?g.enemyRegiMite:i==="popup-gremlin"?g.enemyPopupGremlin:i==="spy-dot"?g.enemySpyDot:null,S={position:"absolute",left:s-r/2,top:e-r/2,width:r,height:r,opacity:u>0?.5:1,filter:d?"brightness(2)":"none",pointerEvents:"none"};if(i==="regi-mite"){let z=Number.isFinite(p)?p:0,N=Math.floor(z)%16;return t.createElement("div",{style:S},t.createElement("div",{style:{width:r,height:r,transform:h?"scaleX(-1)":void 0,transformOrigin:"center"}},t.createElement(_,{src:T,width:r,height:r,frameWidth:32,frameHeight:32,columns:4,rows:4,marginX:16,marginY:16,spacingX:32,spacingY:32,frameIndex:N,fallback:t.createElement(b,{src:T,width:r,height:r,style:{width:r,height:r},fallback:t.createElement("div",{style:{width:"100%",height:"100%",background:"linear-gradient(180deg, #f0e8d8 0%, #e8dcc8 100%)",border:"2px solid #888",borderRadius:3}},t.createElement("div",{style:{height:5,background:"#889",borderRadius:"2px 2px 0 0"}}),t.createElement("div",{style:{display:"flex",justifyContent:"center",gap:3,marginTop:3}},t.createElement("div",{style:{width:4,height:4,background:"#333",borderRadius:"50%"}}),t.createElement("div",{style:{width:4,height:4,background:"#333",borderRadius:"50%"}})))})})))}if(i==="popup-gremlin"){let z=Number.isFinite(p)?p:0,N=Math.sin(z*3)*4,K=Math.sin(z*5)*8,C=Math.floor(z)%16;return t.createElement("div",{style:{...S,transform:`translateY(${N}px) rotate(${K}deg) scale(${1+Math.sin(z*4)*.15})`}},t.createElement(_,{src:T,width:r,height:r,frameWidth:32,frameHeight:32,columns:4,rows:4,marginX:16,marginY:16,spacingX:32,spacingY:32,frameIndex:C,fallback:t.createElement(b,{src:T,width:r,height:r,style:{width:r,height:r},fallback:t.createElement("div",{style:{width:"100%",height:"100%",background:"linear-gradient(180deg, #ffe0e0 0%, #ffb0b0 100%)",border:"2px solid #d66",borderRadius:3,boxShadow:"0 0 8px rgba(255,100,100,0.5)"}},t.createElement("div",{style:{display:"flex",justifyContent:"center",gap:4,marginTop:3}},t.createElement("div",{style:{width:5,height:5,background:"#800",borderRadius:"50%",transform:`rotate(${z*20}deg)`}}),t.createElement("div",{style:{width:5,height:5,background:"#800",borderRadius:"50%",transform:`rotate(${-z*20}deg)`}})),t.createElement("div",{style:{width:10,height:5,margin:"2px auto",background:"#800",borderRadius:"0 0 6px 6px"}}))})}))}if(i==="spy-dot"){let z=Number.isFinite(p)?p:0,N=Math.floor(z)%16;return t.createElement("div",{style:{...S,animation:"blink 0.7s infinite"}},t.createElement(_,{src:T,width:r,height:r,frameWidth:32,frameHeight:32,columns:4,rows:4,marginX:16,marginY:16,spacingX:32,spacingY:32,frameIndex:N,fallback:t.createElement(b,{src:T,width:r,height:r,style:{width:r,height:r},fallback:t.createElement("div",{style:{width:"100%",height:"100%",background:"#f00",borderRadius:"50%",boxShadow:"0 0 6px #f00"}})})}))}return null}function Wt({x:i,y:s,hp:e}){let r=e>3?0:e>2?1:e>1?2:3;return t.createElement("div",{style:{position:"absolute",left:i,top:s,width:24,height:24,pointerEvents:"none"}},t.createElement(_,{src:g.folderWall,width:24,height:24,frameWidth:32,frameHeight:32,columns:4,rows:1,marginX:16,marginY:16,spacingX:32,frameIndex:r,fallback:t.createElement(b,{src:g.folderWall,width:24,height:24,style:{width:24,height:24},fallback:t.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},t.createElement("rect",{x:"2",y:"5",width:"20",height:"17",rx:"2",fill:"#d4a456",stroke:"#a07030",strokeWidth:"1"}),t.createElement("rect",{x:"2",y:"5",width:"9",height:"4",fill:"#e8bc6a",stroke:"#a07030",strokeWidth:"0.5"}),r>=1&&t.createElement("line",{x1:"8",y1:"10",x2:"18",y2:"20",stroke:"#804020",strokeWidth:"1"}),r>=2&&t.createElement("line",{x1:"4",y1:"14",x2:"12",y2:"20",stroke:"#804020",strokeWidth:"0.5"}),r>=3&&t.createElement("line",{x1:"14",y1:"8",x2:"20",y2:"16",stroke:"#804020",strokeWidth:"0.5"}))})}),t.createElement("div",{style:{position:"absolute",bottom:-4,left:2,width:20,height:3,background:"#333",borderRadius:1}},t.createElement("div",{style:{width:`${e/4*100}%`,height:"100%",background:e>2?"#4a4":"#e44",borderRadius:1}})))}function Qt({x:i,y:s,type:e}){let r={apple:{emoji:"\u{1F34E}"},coolant:{emoji:"\u2744\uFE0F"},"powerup-rapid":{emoji:"\u{1F525}",glow:"#ff0"},"powerup-triple":{emoji:"\u{1F531}",glow:"#4af"},"powerup-giant":{emoji:"\u{1F6E1}\uFE0F",glow:"#fa0"}},u=r[e]||r.apple,d=e&&e.startsWith("powerup"),p=e==="apple"?g.pickupApple:e==="coolant"?g.pickupCoolant:e==="powerup-rapid"?g.powerupRapid:e==="powerup-triple"?g.powerupTriple:e==="powerup-giant"?g.powerupGiant:null,h=22;return t.createElement("div",{style:{position:"absolute",left:i-14,top:s-14,width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,animation:d?"pulse 0.6s infinite":"wobble 0.8s infinite",filter:u.glow?`drop-shadow(0 0 10px ${u.glow})`:"none",pointerEvents:"none"}},t.createElement(b,{src:p,width:h,height:h,style:{width:h,height:h},fallback:u.emoji}))}var w={MENU:"menu",SETUP:"setup",PLAYING:"playing",PAUSED:"paused",INTERMISSION:"intermission",GAMEOVER:"gameover",WIN:"win"};function Kt({x:i,y:s,hp:e,isHit:r,empCharge:u,invincible:d,mousePos:p,powerUp:h,cpuHeat:T,ramPressure:S}){let N=Math.atan2(p.y-s,p.x-i)*180/Math.PI,K=h==="giant",C=K?48:32,m=T>=90,$=S>=60,F="none",U="#fff";return r?F="brightness(2.5)":K?(F="drop-shadow(0 0 8px #ff0)",U="#ffd700"):m?(F="drop-shadow(0 0 6px #f00)",U="#ff6666"):$&&(F="drop-shadow(0 0 4px #0af)",U="#aaddff"),e<=2&&(U="#fcc"),t.createElement(t.Fragment,null,t.createElement("div",{style:{position:"absolute",left:p.x-14,top:p.y-14,width:28,height:28,pointerEvents:"none",zIndex:60}},t.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28"},t.createElement("circle",{cx:"14",cy:"14",r:"11",fill:"none",stroke:m?"rgba(255,100,100,0.7)":"rgba(255,255,255,0.5)",strokeWidth:"2"}),t.createElement("circle",{cx:"14",cy:"14",r:"4",fill:"none",stroke:m?"rgba(255,100,100,0.8)":"rgba(255,255,255,0.7)",strokeWidth:"2"}),t.createElement("line",{x1:"14",y1:"0",x2:"14",y2:"7",stroke:"rgba(255,255,255,0.7)",strokeWidth:"2"}),t.createElement("line",{x1:"14",y1:"21",x2:"14",y2:"28",stroke:"rgba(255,255,255,0.7)",strokeWidth:"2"}),t.createElement("line",{x1:"0",y1:"14",x2:"7",y2:"14",stroke:"rgba(255,255,255,0.7)",strokeWidth:"2"}),t.createElement("line",{x1:"21",y1:"14",x2:"28",y2:"14",stroke:"rgba(255,255,255,0.7)",strokeWidth:"2"}),t.createElement("circle",{cx:"14",cy:"14",r:"2",fill:m?"#f00":"#f44"}))),t.createElement("svg",{style:{position:"absolute",left:0,top:0,width:640,height:480,pointerEvents:"none",zIndex:45}},t.createElement("line",{x1:i,y1:s,x2:p.x,y2:p.y,stroke:"rgba(255,255,255,0.12)",strokeWidth:"1",strokeDasharray:"6,4"})),t.createElement("div",{style:{position:"absolute",left:i-C/2,top:s-C/2,width:C,height:C,transform:`rotate(${N+90}deg)`,transformOrigin:"center center",filter:F,opacity:d>0&&Math.floor(d/4)%2?.4:1,zIndex:50,pointerEvents:"none"}},t.createElement(b,{src:g.cursor,width:C,height:C,style:{width:C,height:C},fallback:t.createElement("svg",{width:C,height:C,viewBox:"0 0 28 28"},t.createElement("polygon",{points:"14,3 4,20 14,15 24,20",fill:U,stroke:"#111",strokeWidth:"1.5",strokeLinejoin:"round"}))})),u>=100&&t.createElement("div",{style:{position:"absolute",left:Math.round(i-C/2-6),top:Math.round(s-C/2-6),width:C+12,height:C+12,border:"3px solid #4af",borderRadius:"50%",animation:"pulse 1s infinite",pointerEvents:"none",zIndex:49,boxSizing:"border-box"}}),h&&t.createElement("div",{style:{position:"absolute",left:i-24,top:s-C/2-18,fontSize:8,color:"#fff",background:h==="rapid"?"#f80":h==="triple"?"#08f":"#ff0",padding:"2px 6px",borderRadius:4,fontWeight:"bold",pointerEvents:"none",zIndex:55,whiteSpace:"nowrap"}},h==="rapid"?"\u{1F525}RAPID":h==="triple"?"\u{1F531}TRIPLE":"\u{1F6E1}\uFE0FGIANT"))}function Vt({popup:i,onChoice:s}){let[e,r]=x(100);ot(()=>{let z=setInterval(()=>{r(N=>N<=1?(s(i,i.isLegit?"reject":"accept"),100):N-.8)},50);return()=>clearInterval(z)},[i,s]);let u=i.swapped,d,p,h;i.type==="firewall"?(d="\u{1F6E1}\uFE0F Connection Request",p="\u26A0\uFE0F Unknown signature!",h="#d44"):i.type==="security-update"?(d="\u{1F512} Security Patch",p="\u2713 Verified - INSTALL!",h="#484"):(d="\u{1F4E6} Update Available",p="\u26A0\uFE0F Checksum mismatch!",h="#d44");let S=i.type==="firewall"?u?[{l:"[Q] Deny",a:"deny",v:"default"},{l:"[E] Allow",a:"allow",v:"primary"}]:[{l:"[E] Allow",a:"allow",v:"default"},{l:"[Q] Deny",a:"deny",v:"primary"}]:i.type==="security-update"?u?[{l:"[E] Skip",a:"reject",v:"primary"},{l:"[Q] Install",a:"accept",v:"default"}]:[{l:"[Q] Install",a:"accept",v:"primary"},{l:"[E] Skip",a:"reject",v:"default"}]:u?[{l:"[Q] Later",a:"later",v:"default"},{l:"[E] Install",a:"install",v:"primary"}]:[{l:"[E] Install",a:"install",v:"default"},{l:"[Q] Later",a:"later",v:"primary"}];return t.createElement("div",{style:{position:"absolute",left:i.x,top:i.y,zIndex:400}},t.createElement(it,{title:d,width:260},t.createElement("p",{style:{fontSize:7,marginBottom:8}},i.type==="firewall"?"Unknown process requests access.":i.type==="security-update"?"Critical security update.":"System update available."),t.createElement("p",{style:{fontSize:7,color:h,marginBottom:10,fontWeight:i.isLegit?"bold":"normal"}},p),t.createElement("div",{style:{width:"100%",height:6,background:"#ddd",borderRadius:3,marginBottom:14}},t.createElement("div",{style:{width:`${e}%`,height:"100%",background:e>30?"#5a5":"#d55",borderRadius:3}})),t.createElement("div",{style:{display:"flex",gap:10,justifyContent:"center"}},t.createElement(et,{variant:S[0].v,onClick:()=>s(i,S[0].a)},S[0].l),t.createElement(et,{variant:S[1].v,onClick:()=>s(i,S[1].a)},S[1].l))))}function zt({x:i,y:s,hp:e}){return t.createElement("div",{style:{position:"absolute",left:i-24,top:s-24,width:48,height:48,pointerEvents:"none"}},t.createElement(b,{src:g.systemFolder,width:48,height:48,style:{width:48,height:48},fallback:t.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48"},t.createElement("rect",{x:"4",y:"8",width:"40",height:"36",rx:"3",fill:"#4a7c9c",stroke:"#2a5c7c",strokeWidth:"2"}),t.createElement("rect",{x:"4",y:"8",width:"16",height:"6",fill:"#5a9cbc"}),t.createElement("rect",{x:"18",y:"22",width:"12",height:"10",rx:"2",fill:"#ffd700",stroke:"#aa8800",strokeWidth:"1"}))}),t.createElement("div",{style:{position:"absolute",bottom:-10,left:4,width:40,height:5,background:"#333",borderRadius:2,overflow:"hidden"}},t.createElement("div",{style:{width:`${e}%`,height:"100%",background:e>50?"#4a4":"#e44"}})))}function Zt({setupTimer:i,folderWalls:s,setFolderWalls:e,deployables:r,setDeployables:u,onStart:d,mousePos:p}){let[h,T]=x(null),S=18,z=[{type:"folder",name:"Folder Wall",count:8-s.length,icon:t.createElement(_,{src:g.folderWall,width:S,height:S,frameWidth:32,frameHeight:32,columns:4,rows:1,marginX:16,marginY:16,spacingX:32,frameIndex:0,fallback:t.createElement("span",{style:{fontSize:18}},"\u{1F4C1}")}),desc:"Blocks enemies"},{type:"watchdog",name:"Watchdog",count:1-r.filter(m=>m.type==="watchdog").length,icon:t.createElement(_,{src:g.deployableWatchdog,width:S,height:S,frameWidth:44,frameHeight:44,columns:4,rows:2,marginX:10,marginY:10,spacingX:20,spacingY:20,frameIndex:7,fallback:t.createElement("span",{style:{fontSize:18}},"\u{1F415}")}),desc:"Auto-turret"},{type:"sticky",name:"Floppy Disk",count:2-r.filter(m=>m.type==="sticky").length,icon:t.createElement(b,{src:g.deployableSticky,width:S,height:S,style:{width:S,height:S},fallback:t.createElement("span",{style:{fontSize:18}},"\u{1F4DD}")}),desc:"Decoy target"}],N=(m,$)=>{if(!h||$<50)return;let F=Math.round(m/16)*16-12,U=Math.round($/16)*16-12;if(!(Math.abs(F+12-320)<50&&Math.abs(U+12-280)<50||[...s,...r].some(q=>Math.abs(q.x-F)<24&&Math.abs(q.y-U)<24))){if(h==="folder"&&s.length<8){e(q=>[...q,{id:Math.random(),x:F,y:U,hp:4}]);return}if(h==="watchdog"&&r.filter(q=>q.type==="watchdog").length<1){u(q=>[...q,{id:Math.random(),type:"watchdog",x:F,y:U,aimDir:7}]);return}h==="sticky"&&r.filter(q=>q.type==="sticky").length<2&&u(q=>[...q,{id:Math.random(),type:"sticky",x:F,y:U}])}},K=Math.round(p.x/16)*16-12,C=Math.round(p.y/16)*16-12;return t.createElement(t.Fragment,null,t.createElement("div",{onClick:m=>{if(!h)return;let $=m.currentTarget.getBoundingClientRect(),F=640/$.width,U=480/$.height;N((m.clientX-$.left)*F,(m.clientY-$.top)*U)},style:{position:"absolute",inset:0,top:20,cursor:h?"crosshair":"default"}},h&&p.y>50&&t.createElement("div",{style:{position:"absolute",left:K,top:C,width:24,height:24,border:"2px dashed #4a4",background:"rgba(74, 164, 74, 0.3)",pointerEvents:"none"}})),t.createElement(zt,{x:320,y:280,hp:100}),s.map(m=>t.createElement(Wt,{key:m.id,...m})),r.map(m=>t.createElement(Ct,{key:m.id,...m})),t.createElement(it,{title:"Tower Defense Setup",width:244,x:16,y:40},t.createElement("div",{style:{fontSize:6,marginBottom:10,color:"#666"}},"Click item \u2192 Click on desktop to place"),t.createElement("div",{style:{display:"flex",flexDirection:"column",gap:6}},z.map(m=>t.createElement("div",{key:m.type,onClick:()=>m.count>0&&T(m.type),style:{display:"flex",alignItems:"center",gap:8,padding:6,background:h===m.type?"#bef":m.count>0?"#fff":"#eee",border:`2px solid ${h===m.type?"#48a":"#aaa"}`,borderRadius:4,cursor:m.count>0?"pointer":"not-allowed",opacity:m.count>0?1:.5}},t.createElement("span",{style:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}},m.icon),t.createElement("div",{style:{flex:1}},t.createElement("div",{style:{fontSize:7,fontWeight:"bold"}},m.name),t.createElement("div",{style:{fontSize:5,color:"#888"}},m.desc," (\xD7",m.count,")"))))),t.createElement("div",{style:{marginTop:14,textAlign:"center"}},t.createElement("div",{style:{fontSize:12,marginBottom:10,color:"#e55",display:"flex",alignItems:"center",justifyContent:"center",gap:6}},t.createElement("span",{style:{fontSize:16,lineHeight:1}},"\u23F1"),t.createElement("span",null,i,"s")),t.createElement(et,{variant:"primary",onClick:d},"Start Wave \u25B6"))))}function Jt({x:i,y:s,clutter:e,setClutter:r,setPlayer:u}){let[d,p]=x(!1);return t.createElement("div",{onClick:()=>{e.length>0&&(p(!0),u(T=>({...T,ramPressure:Math.max(0,T.ramPressure-e.length*8)})),r([]),setTimeout(()=>p(!1),300))},style:{position:"absolute",left:i,top:s,width:32,height:36,cursor:e.length>0?"pointer":"default",transform:d?"scale(1.2)":"scale(1)",transition:"transform 0.15s",zIndex:30}},t.createElement(b,{src:g.trash,width:32,height:36,style:{width:32,height:36},fallback:t.createElement("svg",{width:"32",height:"36",viewBox:"0 0 32 36"},t.createElement("path",{d:"M6 10 L8 32 L24 32 L26 10 Z",fill:"#888",stroke:"#555",strokeWidth:"1"}),t.createElement("rect",{x:"4",y:"6",width:"24",height:"4",rx:"1",fill:"#999",stroke:"#555",strokeWidth:"1"}),t.createElement("rect",{x:"12",y:"3",width:"8",height:"4",rx:"1",fill:"#777",stroke:"#555",strokeWidth:"0.5"}),t.createElement("line",{x1:"11",y1:"14",x2:"11",y2:"28",stroke:"#666",strokeWidth:"1"}),t.createElement("line",{x1:"16",y1:"14",x2:"16",y2:"28",stroke:"#666",strokeWidth:"1"}),t.createElement("line",{x1:"21",y1:"14",x2:"21",y2:"28",stroke:"#666",strokeWidth:"1"}))}),e.length>0&&t.createElement("div",{style:{position:"absolute",top:-6,right:-6,width:18,height:18,background:"#e55",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:8,color:"#fff",fontWeight:"bold",border:"2px solid #fff",animation:"pulse 1s infinite"}},e.length))}var Rt=()=>({x:640/2,y:480/2+20,hp:5,maxHp:5,empCharge:100,dashEnergy:100,cpuHeat:0,ramPressure:0,isDashing:!1,isHit:!1,invincible:0,upgrades:[],powerUp:null,powerUpTimer:0});function ye(i){let s=i;for(;s<-Math.PI;)s+=Math.PI*2;for(;s>Math.PI;)s-=Math.PI*2;return s}function ve(i,s){let e=Math.atan2(s,i),r=Math.PI/4,u=ye(e-Math.PI/2),d=Math.round(-u/r)%8;return d<0&&(d+=8),d}function te(){let[i,s]=x(w.MENU),[e,r]=x(Rt),[u,d]=x([]),[p,h]=x([]),[T,S]=x([]),[z,N]=x([]),[K,C]=x([]),[m,$]=x([]),[F,U]=x([]),[G,q]=x({x:640/2,y:480/2}),[O,st]=x({}),[L,at]=x(0),[R,lt]=x(90),[bt,ht]=x(0),[St,ct]=x(25),[ut,yt]=x(100),[kt,dt]=x(0),[ee,Mt]=x(100),[Ft,Et]=x(""),[Dt,vt]=x(!1),[rt,V]=x(!1),[nt,It]=x(null),Gt=gt(null),xt=gt(null),Lt=gt(0),At=gt(0),Ht=gt(0),Ut=gt(1e4);ot(()=>{Et(Math.random().toString(36).substring(2,10).toUpperCase())},[]);let de=wt((o,W)=>{let D=!1;o.type==="firewall"?D=W==="deny":o.type==="fake-update"?D=W==="later":o.type==="security-update"&&(D=W==="accept"),D?(Mt(B=>Math.min(100,B+8)),r(B=>({...B,ramPressure:Math.max(0,B.ramPressure-8)})),dt(B=>B+25)):r(B=>({...B,hp:B.hp-1})),U([])},[]);ot(()=>{let o=D=>{let B=D.key.toLowerCase();st(Z=>({...Z,[B]:!0})),D.code==="Space"&&(D.preventDefault(),s(Z=>Z===w.PLAYING?w.PAUSED:Z===w.PAUSED?w.PLAYING:Z)),D.key==="F1"&&(D.preventDefault(),V(Z=>!Z)),(B==="q"||B==="e")&&U(Z=>{if(Z.length>0){let X=Z[0],a;(X.swapped?B==="q"?"e":"q":B)==="q"?X.type==="firewall"?a="deny":X.type==="fake-update"?a="later":X.type==="security-update"&&(a="accept"):X.type==="firewall"?a="allow":X.type==="fake-update"?a="install":X.type==="security-update"&&(a="reject");let c=!1;return X.type==="firewall"?c=a==="deny":X.type==="fake-update"?c=a==="later":X.type==="security-update"&&(c=a==="accept"),c?(Mt(l=>Math.min(100,l+8)),r(l=>({...l,ramPressure:Math.max(0,l.ramPressure-8)})),dt(l=>l+25)):r(l=>({...l,hp:l.hp-1})),[]}return Z})},W=D=>{st(B=>({...B,[D.key.toLowerCase()]:!1}))};return window.addEventListener("keydown",o),window.addEventListener("keyup",W),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",W)}},[]);let pe=wt(o=>{if(!Gt.current)return;let W=Gt.current.getBoundingClientRect(),D=640/W.width,B=480/W.height;q({x:(o.clientX-W.left)*D,y:(o.clientY-W.top)*B})},[]),fe=wt(()=>{r(o=>({...o,empCharge:0})),d(o=>o.map(W=>({...W,stunned:120}))),It({x:e.x,y:e.y}),setTimeout(()=>It(null),600)},[e.x,e.y]);ot(()=>{if(i!==w.PLAYING){xt.current&&cancelAnimationFrame(xt.current);return}let o=W=>{let D=Math.min(W-Lt.current,50);Lt.current=W,r(a=>{let n=a.upgrades.includes("ram"),c=3.5,l=n?.004:.008,k=1-a.ramPressure*l,f=c*Math.max(.2,k),M=a.x,E=a.y,y=!1,v=a.dashEnergy;if((O.w||O.arrowup)&&(E-=f),(O.s||O.arrowdown)&&(E+=f),(O.a||O.arrowleft)&&(M-=f),(O.d||O.arrowright)&&(M+=f),O.shift&&a.dashEnergy>20){let j=G.x-a.x,Y=G.y-a.y,Q=Math.sqrt(j*j+Y*Y)||1;M+=j/Q*10,E+=Y/Q*10,y=!0,v-=1.5}else v=Math.min(100,a.dashEnergy+.2);M=Math.max(16,Math.min(624,M)),E=Math.max(36,Math.min(464,E));let I=a.powerUp,J=a.powerUpTimer;return a.powerUp&&a.powerUpTimer>0&&(J--,J<=0&&(I=null)),{...a,x:M,y:E,isDashing:y,dashEnergy:v,empCharge:Math.min(100,a.empCharge+.15),cpuHeat:Math.max(0,a.cpuHeat-.04),invincible:Math.max(0,a.invincible-1),isHit:a.invincible>50,powerUp:I,powerUpTimer:J}}),At.current-=D;let B=e.cpuHeat>=90,Z=e.upgrades.includes("fan");if(Dt&&At.current<=0&&F.length===0&&e.powerUp!=="giant"&&!B){let a=G.x-e.x,n=G.y-e.y,c=Math.sqrt(a*a+n*n)||1,l=a/c,k=n/c,f=8,M=Math.atan2(n,a),E=14,y=e.x+l*E,v=e.y+k*E,I=e.powerUp==="triple";h(I?tt=>[...tt,{x:y,y:v,vx:l*f,vy:k*f,id:Math.random()},{x:y,y:v,vx:Math.cos(M-.2)*f,vy:Math.sin(M-.2)*f,id:Math.random()},{x:y,y:v,vx:Math.cos(M+.2)*f,vy:Math.sin(M+.2)*f,id:Math.random()}]:Q=>[...Q,{x:y,y:v,vx:l*f,vy:k*f,id:Math.random()}]);let J=e.powerUp==="rapid"?60:180,j=e.cpuHeat*1.5;At.current=J+j;let Y=e.powerUp==="rapid"?4:6;Z&&(Y*=.5),r(Q=>({...Q,cpuHeat:Math.min(100,Q.cpuHeat+Y)}))}h(a=>a.map(n=>({...n,x:n.x+n.vx,y:n.y+n.vy})).filter(n=>n.x>-10&&n.x<650&&n.y>20&&n.y<490)),d(a=>a.map(n=>{if(n.stunned>0)return{...n,stunned:n.stunned-1};let c=320,l=280;if(n.type==="spy-dot"&&(c=e.x,l=e.y),n.type==="popup-gremlin"){let j=(n.bounceTimer||0)+1,Y=n.bounceAngle||0,tt=((Number.isFinite(n.frame)?n.frame:0)+D*.012)%16;if(j>40+Math.random()*40)return Y=Math.random()*Math.PI*2,{...n,x:n.x+Math.cos(Y)*n.speed*2,y:n.y+Math.sin(Y)*n.speed*2,bounceAngle:Y,bounceTimer:0,frame:tt};let me=(320-n.x)*.003,ce=(280-n.y)*.003,Pt=n.x+Math.cos(Y)*n.speed+me,Tt=n.y+Math.sin(Y)*n.speed+ce;return(Pt<10||Pt>630)&&(Y=Math.PI-Y),(Tt<30||Tt>470)&&(Y=-Y),Pt=Math.max(10,Math.min(630,Pt)),Tt=Math.max(30,Math.min(470,Tt)),{...n,x:Pt,y:Tt,bounceAngle:Y,bounceTimer:j,frame:tt,isHit:!1}}let k=K.filter(j=>j.type==="sticky");if(k.length>0&&n.type!=="spy-dot"){let j=k.reduce((Y,Q)=>{let tt=Math.sqrt((n.x-Q.x)**2+(n.y-Q.y)**2);return tt<Y.dist?{note:Q,dist:tt}:Y},{note:null,dist:1/0});j.dist<150&&(c=j.note.x+12,l=j.note.y+12)}let f=c-n.x,M=l-n.y,E=Math.sqrt(f*f+M*M)||1,y=n.x+f/E*n.speed,v=n.y+M/E*n.speed;for(let j of z){if(j.hp<=0)continue;if(Math.sqrt((y-j.x-12)**2+(v-j.y-12)**2)<n.size/2+12){N(Q=>Q.map(tt=>tt.id===j.id?{...tt,hp:tt.hp-.01}:tt)),y=n.x,v=n.y;break}}let I=Number.isFinite(n.frame)?n.frame:0,J=I;return n.type==="regi-mite"&&(J=(I+D*.02)%16),n.type==="spy-dot"&&(J=(I+D*.03)%16),{...n,x:y,y:v,frame:J,isHit:!1}}));let X=K.find(a=>a.type==="watchdog");if(X){let a=null,n=200;for(let c of u){let l=Math.sqrt((c.x-X.x-12)**2+(c.y-X.y-12)**2);l<n&&(n=l,a=c)}if(a){let c=a.x-X.x-12,l=a.y-X.y-12,k=ve(c,l);if(C(f=>{let M=!1,E=f.map(y=>y.id!==X.id||(Number.isFinite(y.aimDir)?y.aimDir:7)===k?y:(M=!0,{...y,aimDir:k}));return M?E:f}),Math.random()<.03){let f=Math.sqrt(c*c+l*l)||1;h(M=>[...M,{x:X.x+12,y:X.y+12,vx:c/f*6,vy:l/f*6,id:Math.random(),fromWatchdog:!0}])}}else C(l=>{let k=!1,f=l.map(M=>M.id!==X.id||(Number.isFinite(M.aimDir)?M.aimDir:7)===7?M:(k=!0,{...M,aimDir:7}));return k?f:l})}if(h(a=>{let n=[];for(let c of a){let l=!1;d(k=>k.map(f=>{if(l)return f;if(Math.sqrt((c.x-f.x)**2+(c.y-f.y)**2)<f.size/2+5){l=!0;let E=f.hp-1;if(E<=0){let y=Math.random(),v=null;return y<.2?v="apple":y<.28?v="coolant":y<.36?v="powerup-rapid":y<.44?v="powerup-triple":y<.5&&(v="powerup-giant"),v&&S(I=>[...I,{x:f.x,y:f.y,type:v,id:Math.random()}]),Math.random()<.7&&($(I=>[...I,{x:f.x+(Math.random()-.5)*30,y:f.y+(Math.random()-.5)*30,id:Math.random()}]),r(I=>({...I,ramPressure:Math.min(100,I.ramPressure+8)}))),dt(I=>I+10),null}return{...f,hp:E,isHit:!0}}return f}).filter(Boolean)),l||n.push(c)}return n}),e.invincible<=0){let a=e.powerUp==="giant"?24:10;for(let n of u){if(n.stunned>0)continue;if(Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<n.size/2+a){if(e.powerUp==="giant")d(l=>l.map(k=>k.id===n.id?k.hp<=3?(dt(f=>f+10),null):{...k,hp:k.hp-3,stunned:30}:k).filter(Boolean));else if(!e.isDashing){r(l=>({...l,hp:l.hp-1,invincible:60,isHit:!0}));break}}}}for(let a of u){if(a.stunned>0)continue;Math.sqrt((a.x-320)**2+(a.y-280)**2)<35&&yt(c=>Math.max(0,c-.05))}if(S(a=>a.filter(n=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)<20?(n.type==="apple"?r(l=>({...l,hp:Math.min(l.maxHp,l.hp+1)})):n.type==="coolant"?r(l=>({...l,cpuHeat:Math.max(0,l.cpuHeat-60)})):n.type==="powerup-rapid"?r(l=>({...l,powerUp:"rapid",powerUpTimer:480})):n.type==="powerup-triple"?r(l=>({...l,powerUp:"triple",powerUpTimer:480})):n.type==="powerup-giant"&&r(l=>({...l,powerUp:"giant",powerUpTimer:360})),!1):!0)),Ht.current-=D,Ht.current<=0){let a={1:3500,2:2800,3:2200},n=Math.min((90-R)*15,800);Ht.current=Math.max(1200,(a[L]||3e3)-n);let c=Math.floor(Math.random()*3),l,k,f=64;c===0?(l=-f/2,k=20+f/2+Math.random()*(460-f)):c===1?(l=640+f/2,k=20+f/2+Math.random()*(460-f)):(l=f/2+Math.random()*(640-f),k=480+f/2);let M=.5+L*.15+Math.random()*.2;if(d(E=>[...E,{id:Math.random(),type:"regi-mite",x:l,y:k,hp:L>=3?3:2,size:64,flipX:c===0,speed:M,frame:0,stunned:0}]),L>=2&&Math.random()<.25){let E=Math.floor(Math.random()*3),y,v;E===0?(y=-15,v=100+Math.random()*200):E===1?(y=655,v=100+Math.random()*200):(y=80+Math.random()*480,v=495),d(I=>[...I,{id:Math.random(),type:"popup-gremlin",x:y,y:v,hp:1.5,size:36,speed:1.3+Math.random()*.5,frame:Math.random()*16,stunned:0,bounceAngle:Math.random()*Math.PI*2,bounceTimer:0}])}if(L>=2&&Math.random()<.15){let y=Math.floor(Math.random()*3),v,I;y===0?(v=-64/2,I=20+64/2+Math.random()*396):y===1?(v=640+64/2,I=20+64/2+Math.random()*396):(v=64/2+Math.random()*576,I=480+64/2),d(J=>[...J,{id:Math.random(),type:"spy-dot",x:v,y:I,hp:.5,size:64,speed:.35,frame:0,stunned:0}])}if(L===3&&Math.random()<.3){let E=Math.floor(Math.random()*3),y,v;E===0?(y=-15,v=120+Math.random()*200):E===1?(y=655,v=120+Math.random()*200):(y=100+Math.random()*440,v=495);let I=Math.random()<.5?"regi-mite":"popup-gremlin";d(J=>[...J,{id:Math.random(),type:I,x:y,y:v,hp:I==="regi-mite"?2:1.5,size:I==="regi-mite"?64:36,flipX:E===0,speed:.8+Math.random()*.4,frame:0,stunned:0,bounceAngle:Math.random()*Math.PI*2,bounceTimer:0}])}}if(Ut.current-=D,Ut.current<=0&&F.length===0&&L>=1){let a={1:18e3,2:14e3,3:1e4}[L]||15e3,n=(90-R)/90;Ut.current=a*(1-n*.3);let c={1:.4,2:.55,3:.7}[L]||.5;if(Math.random()<c){let l=Math.random(),k=l<.4?"firewall":l<.7?"fake-update":"security-update",f={1:.15,2:.4,3:.65}[L]||.3;U([{id:Math.random(),type:k,x:80+Math.random()*360,y:50+Math.random()*250,swapped:Math.random()<f,isLegit:k==="security-update"}])}}if(lt(a=>{let n=a-D/1e3;if(n<=0){if(L===1)return at(2),90;if(L===2)return s(w.INTERMISSION),90;if(L===3)return s(w.WIN),0}return Math.max(0,n)}),ht(a=>a+D/1e3),e.hp<=0||ut<=0){s(w.GAMEOVER);return}xt.current=requestAnimationFrame(o)};return Lt.current=performance.now(),xt.current=requestAnimationFrame(o),()=>{xt.current&&cancelAnimationFrame(xt.current)}},[i,O,Dt,G,L,e,u,F,ut,z,K,R,m]),ot(()=>{if(i!==w.SETUP)return;let o=setInterval(()=>{ct(W=>W<=1?(s(w.PLAYING),at(1),25):W-1)},1e3);return()=>clearInterval(o)},[i]);let Yt=wt(()=>{r(Rt()),d([]),h([]),S([]),$([]),U([]),N([]),C([]),at(0),lt(90),ht(0),ct(25),yt(100),dt(0),Mt(100),vt(!1),It(null),At.current=0,Ht.current=3e3,Ut.current=15e3,Et(Math.random().toString(36).substring(2,10).toUpperCase()),setTimeout(()=>s(w.SETUP),50)},[]),ie=wt(o=>{r(W=>({...W,upgrades:[...W.upgrades,o]})),at(3),lt(90),setTimeout(()=>s(w.PLAYING),100)},[]),pt=1.15,he=28,re=mt.width*pt,ue=mt.height*pt,Xt=mt.screen.x*pt,ne=mt.screen.y*pt,jt=640*pt,oe=480*pt,ge=he*pt;return t.createElement("div",{style:{width:"100vw",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",background:"#1a1a2e",fontFamily:'"Press Start 2P", monospace',gap:16,padding:16,boxSizing:"border-box"}},t.createElement("div",{style:{textAlign:"center",marginTop:8,marginBottom:10}},t.createElement("div",{style:{fontSize:22,letterSpacing:2,color:"#fff"}},"DESKTOP WARS"),t.createElement("div",{style:{fontSize:9,marginTop:6,color:"#8af",opacity:.95}},"SYSTEM INTEGRITY")),t.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:20,flexWrap:"wrap",justifyContent:"center"}},t.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10}},t.createElement("div",{style:{width:re,height:ue,position:"relative",filter:"drop-shadow(0 25px 80px rgba(0,0,0,0.6))"}},t.createElement("div",{style:{position:"absolute",left:Xt,top:ne,width:jt,height:oe,overflow:"hidden",borderRadius:ge,background:"#000",zIndex:5}},t.createElement("div",{ref:Gt,onMouseMove:pe,onMouseDown:o=>{o.preventDefault(),o.button===0&&vt(!0),o.button===2&&e.empCharge>=100&&fe()},onMouseUp:o=>{o.button===0&&vt(!1)},onMouseLeave:()=>vt(!1),onContextMenu:o=>o.preventDefault(),style:{width:640,height:480,position:"relative",transform:`scale(${pt})`,transformOrigin:"top left",cursor:i===w.PLAYING?"none":"default"}},t.createElement(b,{src:g.wallpaper,alt:"Wallpaper",width:640,height:480,style:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"cover"},fallback:t.createElement("div",{style:{position:"absolute",inset:0,background:"linear-gradient(180deg, #d4c4a8 0%, #bfad84 100%)"}})}),t.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,height:20,background:"linear-gradient(180deg, #f0f0f0 0%, #d8d8d8 100%)",borderBottom:"1px solid #999",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 22px",fontSize:8,zIndex:100,color:"#111"}},t.createElement("div",{style:{display:"flex",gap:12,alignItems:"center"}},t.createElement("span",{onMouseDown:o=>{o.preventDefault(),o.stopPropagation()},onClick:o=>{o.preventDefault(),o.stopPropagation(),s(W=>W===w.PLAYING?w.PAUSED:W===w.PAUSED?w.PLAYING:W)},style:{fontWeight:"bold",cursor:i===w.PLAYING||i===w.PAUSED?"pointer":"default",opacity:i===w.PLAYING||i===w.PAUSED?1:.55,padding:"2px 4px",borderRadius:3,userSelect:"none"}},"Pause"),t.createElement("span",{onMouseDown:o=>{o.preventDefault(),o.stopPropagation()},onClick:o=>{o.preventDefault(),o.stopPropagation(),V(!0)},style:{cursor:"pointer",opacity:.95,padding:"2px 4px",borderRadius:3,userSelect:"none"}},"Help"),t.createElement("span",{onMouseDown:o=>{o.preventDefault(),o.stopPropagation()},onClick:o=>{o.preventDefault(),o.stopPropagation(),Yt()},style:{cursor:"pointer",opacity:.95,padding:"2px 4px",borderRadius:3,userSelect:"none"}},"Reset")),t.createElement("div",{style:{display:"flex",gap:10,alignItems:"center"}},t.createElement("div",{style:{display:"flex",gap:1,alignItems:"flex-end"}},[1,2,3,4,5].map(o=>t.createElement("div",{key:o,style:{width:3,height:2+o*2,background:e.hp>=o?"#222":"#bbb",borderRadius:1}}))),t.createElement("div",{style:{width:12,height:12,borderRadius:"50%",background:e.empCharge>=100?"#4a90d9":"#999",boxShadow:e.empCharge>=100?"0 0 6px #4af":"none"}}),t.createElement("div",{style:{width:24,height:8,background:"#ddd",borderRadius:2,border:"1px solid #888",overflow:"hidden"},title:`CPU: ${Math.floor(e.cpuHeat)}%`},t.createElement("div",{style:{width:`${e.cpuHeat}%`,height:"100%",background:e.cpuHeat>=90?"#f00":e.cpuHeat>60?"#f80":"#fa0",animation:e.cpuHeat>=90?"blink 0.2s infinite":"none"}})),t.createElement("div",{style:{width:24,height:8,background:"#ddd",borderRadius:2,border:"1px solid #888",overflow:"hidden"},title:`RAM: ${Math.floor(e.ramPressure)}%`},t.createElement("div",{style:{width:`${e.ramPressure}%`,height:"100%",background:e.ramPressure>70?"#e55":e.ramPressure>40?"#ea5":"#5a5"}})),e.powerUp&&t.createElement("span",{style:{padding:"1px 4px",borderRadius:2,background:e.powerUp==="rapid"?"#f80":e.powerUp==="triple"?"#08f":"#fa0",color:"#fff",fontSize:5}},e.powerUp.toUpperCase()),e.upgrades.length>0&&t.createElement("span",{style:{padding:"1px 4px",borderRadius:2,background:e.upgrades.includes("ram")?"#0a0":"#08f",color:"#fff",fontSize:5,border:"1px solid #fff"}},e.upgrades.includes("ram")?"\u{1F9E0}":"\u{1F300}"),e.cpuHeat>=90&&t.createElement("span",{style:{padding:"1px 4px",borderRadius:2,background:"#f00",color:"#fff",fontSize:5,animation:"blink 0.3s infinite"}},"\u{1F525}OVERHEAT!"),e.ramPressure>=60&&t.createElement("span",{style:{padding:"1px 4px",borderRadius:2,background:e.ramPressure>=80?"#a00":"#a50",color:"#fff",fontSize:5,animation:e.ramPressure>=80?"blink 0.5s infinite":"none"}},e.ramPressure>=80?"\u{1F40C}SLOW!":"\u{1F4CA}RAM!"),t.createElement("div",{style:{fontFamily:"monospace",fontSize:8,background:"#222",color:"#0f0",padding:"1px 6px",borderRadius:3,border:"1px solid #444"}},L>0?t.createElement(t.Fragment,null,t.createElement("span",{style:{color:"#888"}},"W",L)," ",t.createElement("span",{style:{color:R<=10?"#f55":"#0f0"}},String(Math.floor(R/60)).padStart(2,"0"),":",String(Math.floor(R%60)).padStart(2,"0"))):t.createElement("span",{style:{color:"#888"}},"--:--")))),i===w.MENU&&t.createElement("div",{style:{position:"absolute",inset:0,top:20,display:"flex",alignItems:"center",justifyContent:"center"}},t.createElement(it,{title:"Desktop Wars",width:380},t.createElement("div",{style:{textAlign:"center"}},t.createElement("div",{style:{marginBottom:8,display:"flex",justifyContent:"center",animation:"idleBob 2.8s ease-in-out infinite"}},t.createElement(b,{src:g.cursor,alt:"Cursor",width:48,height:48,style:{width:48,height:48},fallback:t.createElement("svg",{width:"48",height:"48",viewBox:"0 0 28 28"},t.createElement("polygon",{points:"14,3 4,20 14,15 24,20",fill:"#fff",stroke:"#111",strokeWidth:"1.5",strokeLinejoin:"round"}))})),t.createElement("h1",{style:{fontSize:14,marginBottom:6}},"SYSTEM INTEGRITY"),t.createElement("p",{style:{fontSize:6,color:"#666",marginBottom:20}},"Defend your desktop against malware!"),t.createElement("div",{style:{marginBottom:20}},t.createElement(et,{variant:"primary",onClick:Yt},"START GAME")),t.createElement("div",{style:{fontSize:6,color:"#888",lineHeight:1.8}},t.createElement("p",null,t.createElement("b",null,"WASD")," - Move | ",t.createElement("b",null,"Mouse")," - Aim | ",t.createElement("b",null,"Click")," - Shoot"),t.createElement("p",null,t.createElement("b",null,"Right Click")," - EMP | ",t.createElement("b",null,"Shift")," - Dash"),t.createElement("p",null,t.createElement("b",null,"Q/E")," - Popup buttons ",t.createElement("span",{style:{color:"#fa0"}},"(watch for swaps!)")))))),i===w.SETUP&&t.createElement(Zt,{setupTimer:St,folderWalls:z,setFolderWalls:N,deployables:K,setDeployables:C,onStart:()=>{s(w.PLAYING),at(1)},mousePos:G}),(i===w.PLAYING||i===w.PAUSED)&&t.createElement(t.Fragment,null,t.createElement(zt,{x:320,y:280,hp:ut}),t.createElement(Jt,{x:580,y:420,clutter:m,setClutter:$,setPlayer:r}),m.map(o=>t.createElement(_t,{key:o.id,...o})),z.filter(o=>o.hp>0).map(o=>t.createElement(Wt,{key:o.id,...o})),K.map(o=>t.createElement(Ct,{key:o.id,...o})),nt&&t.createElement(qt,{x:nt.x,y:nt.y}),T.map(o=>t.createElement(Qt,{key:o.id,...o})),u.map(o=>t.createElement($t,{key:o.id,...o})),p.map(o=>t.createElement("div",{key:o.id,style:{position:"absolute",left:o.x-4,top:o.y-4,width:8,height:8,background:"radial-gradient(circle, #ff8 0%, #aa4 100%)",borderRadius:"50%",boxShadow:"0 0 6px #ff8",pointerEvents:"none"}})),t.createElement(Kt,{...e,mousePos:G}),F.map(o=>t.createElement(Vt,{key:o.id,popup:o,onChoice:de})),i===w.PAUSED&&t.createElement("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:500}},t.createElement(it,{title:"PAUSED",width:220},t.createElement("div",{style:{textAlign:"center",padding:12}},t.createElement("p",{style:{fontSize:7,marginBottom:16}},"Press SPACE to continue"),t.createElement(et,{onClick:()=>s(w.MENU)},"Quit to Menu"))))),i===w.INTERMISSION&&t.createElement("div",{style:{position:"absolute",inset:0,top:20,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200}},t.createElement(it,{title:"Wave 2 Complete!",width:340},t.createElement("div",{style:{textAlign:"center",marginBottom:16}},t.createElement("p",{style:{fontSize:8,color:"#666"}},"Choose a hardware upgrade for Wave 3:")),t.createElement("div",{style:{display:"flex",gap:16,justifyContent:"center"}},t.createElement("div",{onClick:()=>ie("ram"),style:{width:120,padding:14,background:"#fff",border:"3px solid #0a0",borderRadius:8,cursor:"pointer",textAlign:"center",transition:"transform 0.1s"},onMouseOver:o=>o.currentTarget.style.transform="scale(1.05)",onMouseOut:o=>o.currentTarget.style.transform="scale(1)"},t.createElement("div",{style:{fontSize:32,marginBottom:8}},"\u{1F9E0}"),t.createElement("div",{style:{fontSize:8,fontWeight:"bold",color:"#080"}},"RAM Upgrade"),t.createElement("div",{style:{fontSize:6,color:"#888",marginTop:4}},"50% less slowdown from clutter")),t.createElement("div",{onClick:()=>ie("fan"),style:{width:120,padding:14,background:"#fff",border:"3px solid #08f",borderRadius:8,cursor:"pointer",textAlign:"center",transition:"transform 0.1s"},onMouseOver:o=>o.currentTarget.style.transform="scale(1.05)",onMouseOut:o=>o.currentTarget.style.transform="scale(1)"},t.createElement("div",{style:{fontSize:32,marginBottom:8}},"\u{1F300}"),t.createElement("div",{style:{fontSize:8,fontWeight:"bold",color:"#06c"}},"Cooling Fan"),t.createElement("div",{style:{fontSize:6,color:"#888",marginTop:4}},"50% less CPU heat buildup"))))),i===w.GAMEOVER&&t.createElement("div",{style:{position:"absolute",inset:0,top:20,background:"rgba(80,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:300}},t.createElement(it,{title:"\u26A0\uFE0F GAME OVER",width:300},t.createElement("div",{style:{textAlign:"center"}},t.createElement("div",{style:{fontSize:36,marginBottom:10}},"\u{1F480}"),t.createElement("h2",{style:{fontSize:12,color:"#d44",marginBottom:10}},"SYSTEM FAILURE"),t.createElement("div",{style:{background:"#222",color:"#0f0",padding:12,borderRadius:4,marginBottom:20}},t.createElement("div",null,"SCORE: ",kt)),t.createElement(et,{variant:"primary",onClick:Yt},"RESTART")))),i===w.WIN&&t.createElement("div",{style:{position:"absolute",inset:0,top:20,background:"rgba(0,80,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:300}},t.createElement(it,{title:"YOU WIN!",width:300},t.createElement("div",{style:{textAlign:"center"}},t.createElement("div",{style:{fontSize:36,marginBottom:10}},"\u{1F3C6}"),t.createElement("div",{style:{background:"#f8f8f8",padding:14,borderRadius:6,marginBottom:16}},t.createElement("div",{style:{fontSize:9}},"Score: ",t.createElement("span",{style:{color:"#4a4",fontWeight:"bold"}},kt))),t.createElement(et,{variant:"primary",onClick:Yt},"Play Again")))),rt&&t.createElement("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:500}},t.createElement(it,{title:"\u{1F4D6} Help",width:350},t.createElement("div",{style:{fontSize:7,lineHeight:1.8}},t.createElement("p",null,t.createElement("b",null,"WASD")," - Move cursor"),t.createElement("p",null,t.createElement("b",null,"Mouse")," - Aim crosshair"),t.createElement("p",null,t.createElement("b",null,"Left Click")," - Shoot"),t.createElement("p",null,t.createElement("b",null,"Right Click")," - EMP (stuns all)"),t.createElement("p",null,t.createElement("b",null,"Shift")," - Dash"),t.createElement("p",{style:{color:"#4a4"}},t.createElement("b",null,"Q")," - Safe popup choice"),t.createElement("p",{style:{color:"#a44"}},t.createElement("b",null,"E")," - Risky popup choice"),t.createElement("div",{style:{marginTop:10,borderTop:"1px solid #ccc",paddingTop:10}},t.createElement("p",null,t.createElement("b",null,"Power-ups:")),t.createElement("p",null,"\u26A1 Rapid Fire | \u2726 Triple Shot | \u{1F6E1}\uFE0F Giant Mode"))),t.createElement("div",{style:{marginTop:14,textAlign:"center"}},t.createElement(et,{onClick:()=>V(!1)},"Close (F1)")))),t.createElement("div",{style:{position:"absolute",inset:0,background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.04) 2px, rgba(0,0,0,0.04) 4px)",pointerEvents:"none",zIndex:80}}))),t.createElement("div",{style:{position:"absolute",left:Xt+jt+52,top:ne+10,width:Math.max(0,re-(Xt+jt)-68),height:oe-20,padding:12,boxSizing:"border-box",color:"#fff",fontSize:7,lineHeight:1.8,background:"transparent",border:"none",zIndex:30,overflow:"hidden",pointerEvents:"none",textShadow:"0 2px 10px rgba(0,0,0,0.9)"}},t.createElement("div",{style:{fontSize:9,marginBottom:10,color:"#8af"}},"CONTROLS"),t.createElement("div",{style:{marginBottom:12}},t.createElement("div",null,"WASD - Move"),t.createElement("div",null,"Mouse - Aim"),t.createElement("div",null,"Click - Shoot"),t.createElement("div",null,"Right - EMP"),t.createElement("div",null,"Shift - Dash"),t.createElement("div",null,"Q/E - Popups"),t.createElement("div",null,"Space - Pause")),t.createElement("div",{style:{fontSize:9,marginBottom:8,color:"#fa0"}},"ENEMIES"),t.createElement("div",{style:{display:"flex",flexDirection:"column",gap:6,marginBottom:12,lineHeight:1.9}},t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(_,{src:g.enemyRegiMite,width:22,height:22,frameWidth:32,frameHeight:32,columns:4,rows:4,marginX:16,marginY:16,spacingX:32,spacingY:32,frameIndex:0,fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F4E6}")}),t.createElement("span",null,"Regi-Mite")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(_,{src:g.enemyPopupGremlin,width:22,height:22,frameWidth:32,frameHeight:32,columns:4,rows:4,marginX:16,marginY:16,spacingX:32,spacingY:32,frameIndex:0,fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F92A}")}),t.createElement("span",null,"Gremlin")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(_,{src:g.enemySpyDot,width:22,height:22,frameWidth:32,frameHeight:32,columns:4,rows:4,marginX:16,marginY:16,spacingX:32,spacingY:32,frameIndex:0,fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F534}")}),t.createElement("span",null,"Spy-Dot"))),t.createElement("div",{style:{fontSize:9,marginBottom:8,color:"#5f5"}},"POWER-UPS"),t.createElement("div",{style:{display:"flex",flexDirection:"column",gap:6,marginBottom:12,lineHeight:1.9}},t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(b,{src:g.pickupApple,width:14,height:14,style:{width:14,height:14},fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F34E}")}),t.createElement("span",null,"Heal")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(b,{src:g.pickupCoolant,width:14,height:14,style:{width:14,height:14},fallback:t.createElement("span",{style:{fontSize:14}},"\u2744\uFE0F")}),t.createElement("span",null,"Coolant")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(b,{src:g.powerupRapid,width:14,height:14,style:{width:14,height:14},fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F525}")}),t.createElement("span",null,"Rapid")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(b,{src:g.powerupTriple,width:14,height:14,style:{width:14,height:14},fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F531}")}),t.createElement("span",null,"Triple")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(b,{src:g.powerupGiant,width:14,height:14,style:{width:14,height:14},fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F6E1}\uFE0F")}),t.createElement("span",null,"Giant"))),t.createElement("div",{style:{fontSize:9,marginBottom:8,color:"#8af"}},"DEPLOYABLES"),t.createElement("div",{style:{display:"flex",flexDirection:"column",gap:6,lineHeight:1.9}},t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(_,{src:g.folderWall,width:14,height:14,frameWidth:32,frameHeight:32,columns:4,rows:1,marginX:16,marginY:16,spacingX:32,frameIndex:0,fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F4C1}")}),t.createElement("span",null,"Wall")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(_,{src:g.deployableWatchdog,width:28,height:28,frameWidth:44,frameHeight:44,columns:4,rows:2,marginX:10,marginY:10,spacingX:20,spacingY:20,frameIndex:7,fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F415}")}),t.createElement("span",null,"Watchdog")),t.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},t.createElement(b,{src:g.deployableSticky,width:14,height:14,style:{width:14,height:14},fallback:t.createElement("span",{style:{fontSize:14}},"\u{1F4DD}")}),t.createElement("span",null,"Floppy Disk")))),t.createElement(b,{src:g.crtMonitor,alt:"CRT Monitor",width:mt.width,height:mt.height,pixelated:!1,style:{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:20}})))),t.createElement("div",{style:{display:"flex",gap:30,background:"linear-gradient(180deg, #2a2a3c 0%, #1a1a2a 100%)",borderRadius:12,padding:"12px 24px",color:"#ccc",fontSize:8,boxShadow:"0 10px 40px rgba(0,0,0,0.4)"}},t.createElement("div",{style:{flex:1}},t.createElement("div",{style:{fontSize:9,color:"#8af",marginBottom:8}},"MISSION"),t.createElement("div",{style:{fontSize:7,lineHeight:1.8}},"Defend your desktop! Protect the ",t.createElement("span",{style:{color:"#fa0"}},"System Folder")," in the center from malware.")),t.createElement("div",{style:{flex:1}},t.createElement("div",{style:{fontSize:9,color:"#f55",marginBottom:8}},"RESOURCES"),t.createElement("div",{style:{fontSize:7,lineHeight:2}},t.createElement("div",null,t.createElement("span",{style:{fontSize:12}},"\u{1F525}")," ",t.createElement("span",{style:{color:"#faa"}},"CPU")," - Overheats when shooting \u2192 \u2744\uFE0F helps"),t.createElement("div",null,t.createElement("span",{style:{fontSize:12}},"\u{1F4CA}")," ",t.createElement("span",{style:{color:"#ffa"}},"RAM")," - Clutter slows you down \u2192 \u{1F5D1}\uFE0F empty"))),t.createElement("div",{style:{flex:1}},t.createElement("div",{style:{fontSize:9,color:"#f8f",marginBottom:8}},"DARK PATTERNS"),t.createElement("div",{style:{fontSize:7,lineHeight:2}},t.createElement("div",null,t.createElement("span",{style:{fontSize:12}},"\u{1F6E1}\uFE0F")," Firewall \u2192 ",t.createElement("span",{style:{color:"#5f5"}},"Deny")," is correct"),t.createElement("div",null,t.createElement("span",{style:{fontSize:12}},"\u{1F4E6}")," Fake Update \u2192 ",t.createElement("span",{style:{color:"#5f5"}},"Later")," is correct"),t.createElement("div",null,t.createElement("span",{style:{fontSize:12}},"\u{1F512}")," Security \u2192 ",t.createElement("span",{style:{color:"#5f5"}},"Install")," is correct"),t.createElement("div",{style:{color:"#fa0",marginTop:4}},"\u26A0\uFE0F Q/E buttons get swapped!")))),t.createElement("style",null,`
	        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
	        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
	        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }
	        @keyframes wobble { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
	        @keyframes idleBob { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
	      `))}var le=document.getElementById("root");if(!le)throw new Error("Missing #root element");Ot.createRoot(le).render(t.createElement(te,null));})();
